{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>setting</title>
    <link rel="stylesheet" href="{% static 'css/setting.css' %}"/>
    <script>
        function cancel(obj){
        var n = confirm("ê°œì¸ ì •ë³´ ìˆ˜ì •ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
        if(n == true){
            obj.href = "{% url 'account:mypage' %}";
        }
    }
        function change(obj){
            var n = confirm("ì •ë§ë¡œ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")
            if(n == true){
                obj.href = "{% url 'account:userDelete'%}";
            }
        }
    </script>
</head>
<body>
{% block navbar %}
{% include "partials/base.html" %}
{% endblock%}
{% block content %}
    <div id="main">
        <div style="border: 1px">
            <span style="margin-top:20px;font-size:40px;"><strong>ê°œì¸ ì •ë³´ ìˆ˜ì • ğŸ”</strong></span>
        </div>
    </div>

    <div id="table">
        <br>
        <div style="border: 1px">
            <span style="margin-top:20px;font-size:40px;"></span>
        </div>
        <form method="POST">
        {%csrf_token%}
        <table border="1">
            <tr>
                <th>ì•„ì´ë””</th>
                <td>{{user.username}}</td>
            </tr>

            <tr>
                <th>ì´ë¦„</th>
                <td>{{user.nickname}}</td>
            </tr>

            <tr>
                <th>ìƒë…„ì›”ì¼</th>
                <td>{{user.birth}}</td>
            </tr>

            <tr>
                <th>ì„±ë³„</th>
                <td>{{user.gender}}</td>
            </tr>

            <tr>
                <th>ì£¼ì†Œ</th>
                <td>
                    <input type="text" id="sample6_postcode" placeholder="user.postcode" name="postcode" value="{{user.postcode}}">
                    <input type="button" style="border:0; width:70px; font-size: 10px; color: black; background-color:rgb(241 229 217); height: 30px;"onclick="sample6_execDaumPostcode()" value="ìš°í¸ë²ˆí˜¸ ì°¾ê¸°" a href=""><br>
                    <input type="text" id="sample6_address" placeholder="user.address" name="address" value="{{user.address}}"><br>
                    {% comment %} <input type="text" id="sample6_detailAddress" placeholder="user.detailAddress"> {% endcomment %}
                    <input type="text" id="sample6_extraAddress" placeholder="user.extraAddress" name="extraAddress" value="{{user.extraAddress}}">
                    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                    <script>
                        function sample6_execDaumPostcode() {
                            new daum.Postcode({
                                oncomplete: function(data) {
                // íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„.

                // ê° ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ ì¡°í•©í•œë‹¤.
                // ë‚´ë ¤ì˜¤ëŠ” ë³€ìˆ˜ê°€ ê°’ì´ ì—†ëŠ” ê²½ìš°ì—” ê³µë°±('')ê°’ì„ ê°€ì§€ë¯€ë¡œ, ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¶„ê¸° í•œë‹¤.
                                    var addr = ''; // ì£¼ì†Œ ë³€ìˆ˜
                                    var extraAddr = ''; // ì°¸ê³ í•­ëª© ë³€ìˆ˜

                //ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œ íƒ€ì…ì— ë”°ë¼ í•´ë‹¹ ì£¼ì†Œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
                                    if (data.userSelectedType === 'R') { // ì‚¬ìš©ìê°€ ë„ë¡œëª… ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°
                                        addr = data.roadAddress;
                                    } else { // ì‚¬ìš©ìê°€ ì§€ë²ˆ ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°(J)
                                        addr = data.jibunAddress;
                                    }

                // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œê°€ ë„ë¡œëª… íƒ€ì…ì¼ë•Œ ì°¸ê³ í•­ëª©ì„ ì¡°í•©í•œë‹¤.
                                    if(data.userSelectedType === 'R'){
                    // ë²•ì •ë™ëª…ì´ ìˆì„ ê²½ìš° ì¶”ê°€í•œë‹¤. (ë²•ì •ë¦¬ëŠ” ì œì™¸)
                    // ë²•ì •ë™ì˜ ê²½ìš° ë§ˆì§€ë§‰ ë¬¸ìê°€ "ë™/ë¡œ/ê°€"ë¡œ ëë‚œë‹¤.
                                        if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
                                            extraAddr += data.bname;
                                        }
                                        // ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
                                        if(data.buildingName !== '' && data.apartment === 'Y'){
                                            extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                                        }
                                        // í‘œì‹œí•  ì°¸ê³ í•­ëª©ì´ ìˆì„ ê²½ìš°, ê´„í˜¸ê¹Œì§€ ì¶”ê°€í•œ ìµœì¢… ë¬¸ìì—´ì„ ë§Œë“ ë‹¤.
                                        if(extraAddr !== ''){
                                            extraAddr = ' (' + extraAddr + ')';
                                        }
                                        // ì¡°í•©ëœ ì°¸ê³ í•­ëª©ì„ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
                                        document.getElementById("sample6_extraAddress").value = extraAddr;
                
                                    } else {
                                        document.getElementById("sample6_extraAddress").value = '';
                                    }

                // ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
                                    document.getElementById('sample6_postcode').value = data.zonecode;
                                    document.getElementById("sample6_address").value = addr;
                // ì»¤ì„œë¥¼ ìƒì„¸ì£¼ì†Œ í•„ë“œë¡œ ì´ë™í•œë‹¤.
                                    document.getElementById("sample6_detailAddress").focus();
                                }
                            }).open();
                        }
                    </script>
                </td>
            </tr>

            <tr>
                <th>ì´ë©”ì¼</th>
                <td>{{user.email}}</td>
            </tr>
        </table>
        <div id='button'>
            <button type="submit" style="border:0; width:120px; font-size: 18px; color: black; background-color:rgb(241 229 217); height: 43px;">ìˆ˜ì •</button>
<a href="" style="color:black;" onclick="cancel(this)"><button type="button" style="border:0; width:120px; font-size: 18px; color: black; background-color:white; height: 37px; margin: 10px; outline-style:groove; outline-color: rgb(241 229 217);">ì·¨ì†Œ</button></a>
        <a href="" onclick="change(this)"><h5>íšŒì› íƒˆí‡´í•˜ê¸°</h5></a>
        </div>
        </form>
    </div>
{% endblock %}
</body>
</html>
{% block footer %}
{% include "partials/footer.html" %}
{% endblock %}